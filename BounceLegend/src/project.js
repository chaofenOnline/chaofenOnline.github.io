System.register("chunks:///Utils/EventManager.js",["cc"],(function(n){"use strict";var e;return{setters:[function(n){e=n.cclegacy}],execute:function(){e._RF.push({},"4a3d7b192ZEMLxN1Az7sTst","EventManager",void 0);n("default",{events_map:{},init:function(){},on:function(n,e,t,s){this.events_map[n]||(this.events_map[n]=[]),this.events_map[n].push({caller:t,func:e,is_once:s})},once:function(n,e,t){this.on(n,t,e,!0)},off:function(n,e,t){if(this.events_map[n]){for(var s=this.events_map[n],i=0;i<s.length;i++){var c=s[i];if(c.caller==t&&c.func==e){s.splice(i,1);break}}s.length<=0&&(this.events_map[n]=null)}},offAll:function(){this.events_map={}},emit:function(n,e){var t=this;this.events_map[n]&&this.events_map[n].forEach((function(s){s.func.call(s.caller,e),s.is_once&&t.off(n,s.caller,s.func)}))}}),e._RF.pop()}}}));

System.register("chunks:///Utils/FirstPersonCamera.js",["cc","../_virtual/_rollupPluginBabelHelpers.js"],(function(e){"use strict";var t,o,n,i,s,c,r,a,y,h,l,u;return{setters:[function(e){t=e.cclegacy,o=e._decorator,n=e.math,i=e.Component},function(e){s=e.applyDecoratedDescriptor,c=e.inherits,r=e.classCallCheck,a=e.possibleConstructorReturn,y=e.getPrototypeOf,h=e.initializerDefineProperty,l=e.assertThisInitialized,u=e.createClass}],execute:function(){var v,p,d,E,m,f,S;t._RF.push({},"13ca45CRTtPC4UFkY2X2CQe","FirstPersonCamera",void 0);var _=o.ccclass,C=o.property,T=n.Vec2,k=n.Vec3,g=n.Quat,x=new T,w=new T,z=new k,U=new g,b="W".charCodeAt(0),A="S".charCodeAt(0),P="A".charCodeAt(0),D="D".charCodeAt(0),O="Q".charCodeAt(0),K="E".charCodeAt(0),L=cc.macro.KEY.shift;e("FirstPersonCamera",(v=C({slide:!0,range:[.05,.5,.01]}),_((E=s((d=function(e){function t(){var e,o;r(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return o=a(this,(e=y(t)).call.apply(e,[this].concat(i))),h(o,"moveSpeed",E,l(o)),h(o,"moveSpeedShiftScale",m,l(o)),h(o,"damp",f,l(o)),h(o,"rotateSpeed",S,l(o)),o._euler=new k,o._velocity=new k,o._position=new k,o._speedScale=.1,o}return c(t,e),u(t,[{key:"onLoad",value:function(){cc.systemEvent.on(cc.SystemEvent.EventType.MOUSE_WHEEL,this.onMouseWheel,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),cc.systemEvent.on(cc.SystemEvent.EventType.TOUCH_START,this.onTouchStart,this),cc.systemEvent.on(cc.SystemEvent.EventType.TOUCH_MOVE,this.onTouchMove,this),cc.systemEvent.on(cc.SystemEvent.EventType.TOUCH_END,this.onTouchEnd,this),k.copy(this._euler,this.node.eulerAngles),k.copy(this._position,this.node.position)}},{key:"onDestroy",value:function(){cc.systemEvent.off(cc.SystemEvent.EventType.MOUSE_WHEEL,this.onMouseWheel,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this),cc.systemEvent.off(cc.SystemEvent.EventType.TOUCH_START,this.onTouchStart,this),cc.systemEvent.off(cc.SystemEvent.EventType.TOUCH_MOVE,this.onTouchMove,this),cc.systemEvent.off(cc.SystemEvent.EventType.TOUCH_END,this.onTouchEnd,this)}},{key:"update",value:function(e){k.transformQuat(z,this._velocity,this.node.rotation),k.scaleAndAdd(this._position,this._position,z,this.moveSpeed*this._speedScale),k.lerp(z,this.node.position,this._position,e/this.damp),this.node.setPosition(z),g.fromEuler(U,this._euler.x,this._euler.y,this._euler.z),g.slerp(U,this.node.rotation,U,e/this.damp),this.node.setRotation(U)}},{key:"onMouseWheel",value:function(e){var t=-e.getScrollY()*this.moveSpeed*.1;k.transformQuat(z,k.UNIT_Z,this.node.rotation),k.scaleAndAdd(this._position,this.node.position,z,t)}},{key:"onKeyDown",value:function(e){var t=this._velocity;e.keyCode===L?this._speedScale=this.moveSpeedShiftScale:e.keyCode===b?0===t.z&&(t.z=-1):e.keyCode===A?0===t.z&&(t.z=1):e.keyCode===P?0===t.x&&(t.x=-1):e.keyCode===D?0===t.x&&(t.x=1):e.keyCode===O?0===t.y&&(t.y=-1):e.keyCode===K&&0===t.y&&(t.y=1)}},{key:"onKeyUp",value:function(e){var t=this._velocity;e.keyCode===L?this._speedScale=1:e.keyCode===b?t.z<0&&(t.z=0):e.keyCode===A?t.z>0&&(t.z=0):e.keyCode===P?t.x<0&&(t.x=0):e.keyCode===D?t.x>0&&(t.x=0):e.keyCode===O?t.y<0&&(t.y=0):e.keyCode===K&&t.y>0&&(t.y=0)}},{key:"onTouchStart",value:function(e){cc.game.canvas.requestPointerLock&&cc.game.canvas.requestPointerLock()}},{key:"onTouchMove",value:function(e){e.getStartLocation(x),x.x>.4*cc.game.canvas.width?(e.getDelta(w),this._euler.y-=w.x*this.rotateSpeed*.1,this._euler.x+=w.y*this.rotateSpeed*.1):(e.getLocation(w),T.subtract(w,w,x),this._velocity.x=.01*w.x,this._velocity.z=.01*-w.y)}},{key:"onTouchEnd",value:function(e){document.exitPointerLock&&document.exitPointerLock(),e.getStartLocation(x),x.x<.4*cc.game.canvas.width&&(this._velocity.x=0,this._velocity.z=0)}}]),t}(i)).prototype,"moveSpeed",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),m=s(d.prototype,"moveSpeedShiftScale",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),f=s(d.prototype,"damp",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),S=s(d.prototype,"rotateSpeed",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),p=d))||p));t._RF.pop()}}}));

System.register("chunks:///config/Global.js",["cc","../_virtual/_rollupPluginBabelHelpers.js"],(function(e){"use strict";var t,c;return{setters:[function(e){t=e.cclegacy},function(e){c=e.classCallCheck}],execute:function(){t._RF.push({},"ceff0HuE45FHqAQfkms/UvE","Global",void 0);var s=e("Global",(function e(){c(this,e)}));s.data={stage:1},s.stageConfig={1:{rowMax:95}},t._RF.pop()}}}));

System.register("chunks:///Utils/EventTypes.js",["cc","../_virtual/_rollupPluginBabelHelpers.js"],(function(e){"use strict";var t,n;return{setters:[function(e){t=e.cclegacy},function(e){n=e.classCallCheck}],execute:function(){t._RF.push({},"7dd2fMJChdPsrB5EIuPkIa9","EventTypes",void 0);var o=e("default",(function e(){n(this,e)}));o.OpenScene="openScene",o.JumpRight="jumpRight",o.JumpLeft="jumpLeft",o.JumpBack="jumpBack",o.MoveDone="moveDone",o.PlayerDie="playerDie",o.CreateCubeRow="createCubeRow",o.CreateCubeRowDone="createCubeRowDone",o.LoadMonsterById="loadMonsterById",o.LoadObstacleById="loadObstacleById",o.CheckIsOnCollision="checkIsOnCollision",o.HitMonster="hitMonster",t._RF.pop()}}}));

System.register("chunks:///Game/ObstacleCtrl.js",["cc","../Utils/EventManager.js","../_virtual/_rollupPluginBabelHelpers.js","../Utils/EventTypes.js"],(function(e){"use strict";var t,r,a,i,n,s,l,o,c,u,f,d,p,b,h,v,y,C;return{setters:[function(e){t=e.cclegacy,r=e._decorator,a=e.Prefab,i=e.loader,n=e.instantiate,s=e.v3,l=e.Component},function(e){o=e.default},function(e){c=e.applyDecoratedDescriptor,u=e.inherits,f=e.classCallCheck,d=e.possibleConstructorReturn,p=e.getPrototypeOf,b=e.initializerDefineProperty,h=e.assertThisInitialized,v=e.createClass,y=e.slicedToArray},function(e){C=e.default}],execute:function(){var O,g,_,m,P;t._RF.push({},"94d438eQ/ZDHb74caBP6Pfr","ObstacleCtrl",void 0);var k=r.ccclass,D=r.property;e("ObstacleCtrl",(O=k("ObstacleCtrl"),g=D(a),O((P=c((m=function(e){function t(){var e,r;f(this,t);for(var a=arguments.length,i=new Array(a),n=0;n<a;n++)i[n]=arguments[n];return r=d(this,(e=p(t)).call.apply(e,[this].concat(i))),b(r,"monsterArr_prefab",P,h(r)),r.idMap={1001:"TrigerRoot"},r}return u(t,e),v(t,[{key:"start",value:function(){}},{key:"onEnable",value:function(){o.on(C.LoadObstacleById,this.loadObstacle,this)}},{key:"onDisable",value:function(){this.node.removeAllChildren(),o.off(C.LoadObstacleById,this.loadObstacle,this)}},{key:"loadObstacle",value:function(e){var t=this,r=y(e,2),l=r[0],o=r[1];i.loadRes("3DRes/gltf-exports/"+this.idMap[l]+"/"+this.idMap[l],a,(function(e,r){var a=o.split("_"),i=a[0],l=a[1],c=n(r);c.setPosition(s(i,.18,l)),c.setScale(s(5,5,5)),t.node.addChild(c)}))}}]),t}(l)).prototype,"monsterArr_prefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_=m))||_));t._RF.pop()}}}));

System.register("chunks:///Modals/WinCtrl.js",["cc","../Utils/EventManager.js","../_virtual/_rollupPluginBabelHelpers.js","../Utils/EventTypes.js"],(function(e){"use strict";var t,n,c,r,s,i,o,l,u,a;return{setters:[function(e){t=e.cclegacy,n=e._decorator,c=e.Component},function(e){r=e.default},function(e){s=e.inherits,i=e.createClass,o=e.classCallCheck,l=e.possibleConstructorReturn,u=e.getPrototypeOf},function(e){a=e.default}],execute:function(){var p;t._RF.push({},"d368fVk8QpO46tqcLaL1KjO","WinCtrl",void 0);var f=n.ccclass;n.property,e("WinCtrl",f("WinCtrl")(p=function(e){function t(){return o(this,t),l(this,u(t).apply(this,arguments))}return s(t,e),i(t,[{key:"onBtnTap",value:function(){r.emit(a.OpenScene,{openScene:"GameScene",closeScene:"WinModal"})}},{key:"start",value:function(){}}]),t}(c))||p);t._RF.pop()}}}));

System.register("chunks:///Utils/SceneManager.js",["cc","./EventManager.js","../_virtual/_rollupPluginBabelHelpers.js","./EventTypes.js"],(function(e){"use strict";var n,t,i,r,a,o,c,l,u,s,p,f,b,y;return{setters:[function(e){n=e.cclegacy,t=e._decorator,i=e.Node,r=e.Component},function(e){a=e.default},function(e){o=e.applyDecoratedDescriptor,c=e.inherits,l=e.classCallCheck,u=e.possibleConstructorReturn,s=e.getPrototypeOf,p=e.initializerDefineProperty,f=e.assertThisInitialized,b=e.createClass},function(e){y=e.default}],execute:function(){var S,h,v,g,d,m,M,z,k,w,C;n._RF.push({},"8426bDX5iROGYUJ+X7u8cEJ","SceneManager",void 0);var D=t.ccclass,_=t.property;e("SceneManager",(S=D("SceneManager"),h=_(i),v=_(i),g=_(i),d=_(i),S((z=o((M=function(e){function n(){var e,t;l(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=u(this,(e=s(n)).call.apply(e,[this].concat(r))),p(t,"HomeScene",z,f(t)),p(t,"GameScene",k,f(t)),p(t,"WinModal",w,f(t)),p(t,"LoseModal",C,f(t)),t}return c(n,e),b(n,[{key:"onEnable",value:function(){a.on(y.OpenScene,this.openScene,this)}},{key:"onDisable",value:function(){a.off(y.OpenScene,this.openScene,this)}},{key:"openScene",value:function(e){var n=e.openScene,t=e.closeScene;this[n].active=!0,t&&(this[t].active=!1)}}]),n}(r)).prototype,"HomeScene",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=o(M.prototype,"GameScene",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=o(M.prototype,"WinModal",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=o(M.prototype,"LoseModal",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=M))||m));n._RF.pop()}}}));

System.register("chunks:///Home/HomeCtrl.js",["cc","../Utils/EventManager.js","../_virtual/_rollupPluginBabelHelpers.js","../Utils/EventTypes.js"],(function(e){"use strict";var t,n,r,c,o,s,i,u,l,a;return{setters:[function(e){t=e.cclegacy,n=e._decorator,r=e.Component},function(e){c=e.default},function(e){o=e.inherits,s=e.createClass,i=e.classCallCheck,u=e.possibleConstructorReturn,l=e.getPrototypeOf},function(e){a=e.default}],execute:function(){var p;t._RF.push({},"d6050gqoJVKkbixFdAdAiOa","HomeCtrl",void 0);var f=n.ccclass;n.property,e("HomeCtrl",f("HomeCtrl")(p=function(e){function t(){return i(this,t),u(this,l(t).apply(this,arguments))}return o(t,e),s(t,[{key:"startBtnOnTap",value:function(){c.emit(a.OpenScene,{openScene:"GameScene",closeScene:"HomeScene"})}},{key:"start",value:function(){}}]),t}(r))||p);t._RF.pop()}}}));

System.register("chunks:///Game/FloorCtrl.js",["cc","../Utils/EventManager.js","../_virtual/_rollupPluginBabelHelpers.js","../Utils/EventTypes.js"],(function(e){"use strict";var t,r,o,i,n,a,l,s,u,c,f,p,h,b,w,C;return{setters:[function(e){t=e.cclegacy,r=e._decorator,o=e.Prefab,i=e.instantiate,n=e.v3,a=e.Component},function(e){l=e.default},function(e){s=e.applyDecoratedDescriptor,u=e.inherits,c=e.classCallCheck,f=e.possibleConstructorReturn,p=e.getPrototypeOf,h=e.initializerDefineProperty,b=e.assertThisInitialized,w=e.createClass},function(e){C=e.default}],execute:function(){var v,y,_,d,z,g,R,m,F;t._RF.push({},"1b867yty+JG2LOty0pNszyp","FloorCtrl",void 0);var k=r.ccclass,D=r.property;e("FloorCtrl",(v=k("FloorCtrl"),y=D(o),_=D(o),v((F=m=function(e){function t(){var e,r;c(this,t);for(var o=arguments.length,i=new Array(o),n=0;n<o;n++)i[n]=arguments[n];return r=f(this,(e=p(t)).call.apply(e,[this].concat(i))),h(r,"row1_prefab",g,b(r)),h(r,"row2_prefab",R,b(r)),r.row_z=0,r}return u(t,e),w(t,[{key:"onEnable",value:function(){t.instance=this,this.row_z=0,l.on(C.CreateCubeRow,this.createCubeRow,this)}},{key:"onDisable",value:function(){this.node.removeAllChildren(),l.off(C.CreateCubeRow,this.createCubeRow,this)}},{key:"createCubeRow",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=0;t<e;t++){var r=void 0;(r=this.row_z%2==0?i(this.row2_prefab):i(this.row1_prefab)).setPosition(n(0,0,this.row_z)),this.node.addChild(r),l.emit(C.CreateCubeRowDone,this.row_z),this.row_z--}}}]),t}(a),m.instance=null,g=s((z=F).prototype,"row1_prefab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=s(z.prototype,"row2_prefab",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=z))||d));t._RF.pop()}}}));

System.register("chunks:///Game/GameCtrl.js",["cc","../Utils/EventManager.js","../_virtual/_rollupPluginBabelHelpers.js","../config/Global.js","../Utils/EventTypes.js"],(function(t){"use strict";var e,a,n,o,i,r,s,c,l,u,h,f,p,v,D,b,C,w;return{setters:[function(t){e=t.cclegacy,a=t._decorator,n=t.Node,o=t.SystemEvent,i=t.loader,r=t.JsonAsset,s=t.Component},function(t){c=t.default},function(t){l=t.applyDecoratedDescriptor,u=t.inherits,h=t.classCallCheck,f=t.possibleConstructorReturn,p=t.getPrototypeOf,v=t.initializerDefineProperty,D=t.assertThisInitialized,b=t.createClass},function(t){C=t.Global},function(t){w=t.default}],execute:function(){var m,y,g,d,S,k,M;e._RF.push({},"6576b8hLjNBw6nHfe3sf6k1","GameCtrl",void 0);var O=a.ccclass,_=a.property;t("GameCtrl",(m=O("GameCtrl"),y=_(n),m((M=k=function(t){function e(){var t,a;h(this,e);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return a=f(this,(t=p(e)).call.apply(t,[this].concat(o))),v(a,"canvas",S,D(a)),a.canvasWidth=null,a.rowMax=95,a.rowCount=0,a.mapData={},a.rowXList=[-1,0,1],a.rowData={},a}return u(e,t),b(e,[{key:"onTONGGUAN",value:function(){c.emit(w.OpenScene,{openScene:"WinModal",closeScene:"GameScene"})}},{key:"onEnable",value:function(){var t=this;console.log("onEnable"),e.instance=this,this.rowMax=95,this.rowCount=0,this.mapData={},this.rowData={},this.canvas.on(o.EventType.TOUCH_START,this.onCanvasTap,this),c.on(w.MoveDone,this.playerMoveDone,this),c.on(w.PlayerDie,this.playerDie,this),c.on(w.CreateCubeRowDone,this.createCubeRowDone,this),this.canvasWidth=this.canvas.width,console.log("当前关卡：",C.data.stage),this.loadStageConfig((function(){t.init()}))}},{key:"onDisable",value:function(){console.log("onDisbale"),this.canvas.off(o.EventType.TOUCH_START,this.onCanvasTap,this),c.off(w.MoveDone,this.playerMoveDone,this),c.off(w.PlayerDie,this.playerDie,this),c.off(w.CreateCubeRowDone,this.createCubeRowDone,this)}},{key:"loadStageConfig",value:function(t){var e=this;i.loadRes("Stage"+C.data.stage,r,(function(a,n){var o=C.stageConfig[C.data.stage];e.rowMax=o.rowMax,e.mapData=[];for(var i=function(t){e.rowXList.forEach((function(a){var n=a+"_"+-t;e.mapData[n]=null}))},r=0;r<e.rowMax;r++)i(r);var s=[];for(var c in e.mapData){var l=c.split("_");parseInt(l[1])<-2&&s.push(c)}var u=n.json;e.rowData=[];var h=u.obstacles,f=s.length;for(var p in h){var v=h[p];if(v)for(var D=0;D<v&&!(f<=0);D++){var b=e.checkCubeCanSetObstacle(s,f),w=s[b].split("_")[1],m=s.splice(b,1)[0];e.mapData[m]={type:"obstacle",id:p},e.rowData[w]||(e.rowData[w]=[]),e.rowData[w].push("obstacle")}}var y=u.monsters;for(var g in y){var d=y[g];if(d)for(var S=0;S<d;S++){var k=Math.floor(Math.random()*s.length),M=s[k].split("_")[1],O=s.splice(k,1)[0];e.mapData[O]={type:"monster",id:g},e.rowData[M]||(e.rowData[M]=[]),e.rowData[M].push("monster")}}t&&t()}))}},{key:"checkCubeCanSetObstacle",value:function(t,e){var a=Math.floor(Math.random()*t.length);e--;var n=t[a].split("_"),o=n[0],i=n[1];if(i=parseInt(i),!this.rowData[i]){var r=this.rowData[i-1]&&this.rowData[i-1].filter((function(t){return"obstacle"==t})).length;if(2==r)return this.checkCubeCanSetObstacle(t,e);if(2==(r=this.rowData[i-2]&&this.rowData[i-2].filter((function(t){return"obstacle"==t})).length))return this.checkCubeCanSetObstacle(t,e);if(2==(r=this.rowData[i+1]&&this.rowData[i+1].filter((function(t){return"obstacle"==t})).length))return this.checkCubeCanSetObstacle(t,e);if(2==(r=this.rowData[i+2]&&this.rowData[i+2].filter((function(t){return"obstacle"==t})).length))return this.checkCubeCanSetObstacle(t,e)}if(this.rowData[i]&&1==this.rowData[i].length){var s=this.rowData[i-1]&&this.rowData[i-1].some((function(t){return"obstacle"==t}));if(s)return this.checkCubeCanSetObstacle(t,e);if(s=this.rowData[i-2]&&this.rowData[i-2].some((function(t){return"obstacle"==t})))return this.checkCubeCanSetObstacle(t,e);if(s=this.rowData[i+1]&&this.rowData[i+1].some((function(t){return"obstacle"==t})))return this.checkCubeCanSetObstacle(t,e);if(s=this.rowData[i+2]&&this.rowData[i+2].some((function(t){return"obstacle"==t})))return this.checkCubeCanSetObstacle(t,e)}if(this.rowData[i]&&this.rowData[i].length>=2&&this.rowData[i].every((function(t){return"obstacle"==t})))return this.checkCubeCanSetObstacle(t,e);var c=o+"_"+(i+1),l=o+"_"+(i-1);return this.mapData[c]&&"obstacle"==this.mapData[c].type||this.mapData[l]&&"obstacle"==this.mapData[l].type?this.checkCubeCanSetObstacle(t,e):a}},{key:"init",value:function(){c.emit(w.CreateCubeRow,10)}},{key:"renderCubeContent",value:function(t){var e=this;["-1_"+t,"0_"+t,"1_"+t].forEach((function(t){var a=e.mapData[t];if(a){var n=a.type;"monster"==n?c.emit(w.LoadMonsterById,[a.id,t]):"obstacle"==n&&c.emit(w.LoadObstacleById,[a.id,t])}}))}},{key:"playerMoveDone",value:function(t){if(Math.abs(t)>=this.rowMax)return console.log("通关"),void c.emit(w.OpenScene,{openScene:"WinModal",closeScene:"GameScene"});this.rowCount>=this.rowMax||c.emit(w.CreateCubeRow)}},{key:"playerDie",value:function(){console.log("玩家死亡"),c.emit(w.OpenScene,{openScene:"LoseModal",closeScene:"GameScene"})}},{key:"createCubeRowDone",value:function(t){this.rowCount++,t>-2||this.renderCubeContent(t)}},{key:"onCanvasTap",value:function(t){console.log("tap"),t.getUILocation().x>this.canvasWidth/2?c.emit(w.JumpRight):c.emit(w.JumpLeft)}},{key:"onBackBtnTap",value:function(){c.emit(w.JumpBack)}}]),e}(s),k.instance=null,S=l((d=M).prototype,"canvas",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=d))||g));e._RF.pop()}}}));

System.register("chunks:///Modals/LoseCtrl.js",["cc","../Utils/EventManager.js","../_virtual/_rollupPluginBabelHelpers.js","../Utils/EventTypes.js"],(function(e){"use strict";var t,n,s,o,r,c,l,u,a,i;return{setters:[function(e){t=e.cclegacy,n=e._decorator,s=e.Component},function(e){o=e.default},function(e){r=e.inherits,c=e.createClass,l=e.classCallCheck,u=e.possibleConstructorReturn,a=e.getPrototypeOf},function(e){i=e.default}],execute:function(){var p;t._RF.push({},"5bcaedg5zRNgIYynSrPUy8v","LoseCtrl",void 0);var f=n.ccclass;n.property,e("LoseCtrl",f("LoseCtrl")(p=function(e){function t(){return l(this,t),u(this,a(t).apply(this,arguments))}return r(t,e),c(t,[{key:"onBtnTap",value:function(){o.emit(i.OpenScene,{openScene:"GameScene",closeScene:"LoseModal"})}},{key:"start",value:function(){}}]),t}(s))||p);t._RF.pop()}}}));

System.register("chunks:///Game/PlayCtrl.js",["cc","../Utils/EventManager.js","../_virtual/_rollupPluginBabelHelpers.js","../Utils/EventTypes.js","./GameCtrl.js"],(function(t){"use strict";var e,i,s,o,a,n,h,r,m,l,c,v,u,p,f,d;return{setters:[function(t){e=t.cclegacy,i=t._decorator,s=t.Node,o=t.v3,a=t.Component},function(t){n=t.default},function(t){h=t.applyDecoratedDescriptor,r=t.inherits,m=t.classCallCheck,l=t.possibleConstructorReturn,c=t.getPrototypeOf,v=t.initializerDefineProperty,u=t.assertThisInitialized,p=t.createClass},function(t){f=t.default},function(t){d=t.GameCtrl}],execute:function(){var y,g,M,P,T;e._RF.push({},"a7e62uUZgJC6aV/J/+vPsb+","PlayCtrl",void 0);var k,D,_=i.ccclass,j=i.property;!function(t){t[t.left=-1]="left",t[t.right=1]="right",t[t.back=4]="back"}(k||(k={})),function(t){t[t.noraml=1]="noraml",t[t.speedUp=2]="speedUp"}(D||(D={}));t("PlayCtrl",(y=_("PlayCtrl"),g=j(s),y((T=h((P=function(t){function e(){var t,i;m(this,e);for(var s=arguments.length,a=new Array(s),n=0;n<s;n++)a[n]=arguments[n];return i=l(this,(t=c(e)).call.apply(t,[this].concat(a))),v(i,"camera",T,u(i)),i.jump_step=-1,i.last_pos=o(0,0,0),i.last_cameraPos=o(0,0,0),i.onceMoveEnd=!1,i.isMoving=!1,i.moveTime=.3,i.moveTimeDt=0,i.jumpY=5,i.A=-i.jumpY/Math.pow(i.moveTime,2),i.H=-i.A*Math.pow(i.moveTime/2,2),i.direction=k.left,i.speedRate=D.noraml,i.moveList=[],i}return r(e,t),p(e,[{key:"onEnable",value:function(){this.isMoving=!1,this.onceMoveEnd=!1,this.moveTime=.3,this.moveTimeDt=0,this.last_pos=o(0,0,0),this.last_cameraPos=o(0,0,0),this.moveList=[],this.node.setPosition(o(0,0,-1)),this.node.setRotationFromEuler(0,0,0),this.camera.setPosition(o(0,4.355154,1)),this.camera.setRotationFromEuler(-36.83,0,0),n.on(f.JumpRight,this.jumpRight,this),n.on(f.JumpLeft,this.jumpLeft,this),n.on(f.JumpBack,this.jumpBack,this)}},{key:"onDisable",value:function(){console.log("PlayerCtrl onDisable"),n.off(f.JumpRight,this.jumpRight,this),n.off(f.JumpLeft,this.jumpLeft,this),n.off(f.JumpBack,this.jumpBack,this)}},{key:"jumpLeft",value:function(){this.moveList.push(k.left),this.playerMoveStart()}},{key:"jumpRight",value:function(){this.moveList.push(k.right),this.playerMoveStart()}},{key:"jumpBack",value:function(){this.moveList.push(k.back),this.playerMoveStart()}},{key:"playerMoveStart",value:function(){this.speedRate=D.noraml,this.moveList.length>1?this.speedRate=D.speedUp:(this.last_pos=this.node.getPosition(),this.last_cameraPos=this.camera.getPosition(),this.direction=this.moveList[0],this.node.setRotationFromEuler(0,-45*this.direction,0),this.moveTimeDt=0,this.onceMoveEnd=!1,this.isMoving=!0)}},{key:"cameraMoveUpdate",value:function(){var t=1;this.direction==k.back&&(t=-1);var e=this.last_cameraPos.z-1*t/this.moveTime*this.moveTimeDt;this.camera.setPosition(o(this.last_cameraPos.x,this.last_cameraPos.y,e))}},{key:"playerMoveUpdate",value:function(){var t,e,i,s=this.last_pos,a=Math.abs(this.jump_step);this.direction==k.back?(i=s.z+a/this.moveTime*this.moveTimeDt,t=s.x):(i=s.z-a/this.moveTime*this.moveTimeDt,((t=s.x+a*this.direction/this.moveTime*this.moveTimeDt)>1.5||t<-1.5)&&(t=3*-this.direction+t)),e=s.y+this.A*Math.pow(this.moveTimeDt-this.moveTime/2,2)+this.H;var n=this.moveTimeDt/this.moveTime*-360;this.node.getChildByName("nv_wait").setRotationFromEuler(n,0,0),this.node.setPosition(o(t,e,i))}},{key:"playerMoveDone",value:function(){if(!this.checkIsOnCollision())return this.isMoving=!1,void n.emit(f.PlayerDie);n.emit(f.MoveDone,this.node.position.z),this.judgePlayerMoveOrStop()}},{key:"checkIsOnCollision",value:function(){var t=!0,e=this.node.position,i=e.x+"_"+e.z,s=d.instance.mapData[i];return s&&("obstacle"==s.type?t=!1:"monster"==s.type&&(t=!0,n.emit(f.HitMonster,i))),t}},{key:"judgePlayerMoveOrStop",value:function(){this.moveList.shift(),this.moveList.length?(this.onceMoveEnd=!1,this.last_pos=this.node.getPosition(),this.last_cameraPos=this.camera.getPosition(),this.direction=this.moveList[0],this.moveTimeDt=0):this.isMoving=!1}},{key:"update",value:function(t){this.isMoving&&(this.moveTimeDt+=t*this.speedRate,this.moveTimeDt>this.moveTime&&(this.moveTimeDt=this.moveTime,this.onceMoveEnd=!0),this.playerMoveUpdate(),this.cameraMoveUpdate(),this.onceMoveEnd&&this.playerMoveDone())}}]),e}(a)).prototype,"camera",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=P))||M));e._RF.pop()}}}));

System.register("chunks:///Game/MonsterCtrl.js",["cc","../Utils/EventManager.js","../_virtual/_rollupPluginBabelHelpers.js","../Utils/EventTypes.js"],(function(t){"use strict";var e,n,o,r,i,s,a,l,u,c,d,p,f,h,v,y,M,m,C;return{setters:[function(t){e=t.cclegacy,n=t._decorator,o=t.Prefab,r=t.loader,i=t.instantiate,s=t.v3,a=t.SkeletalAnimationComponent,l=t.Component},function(t){u=t.default},function(t){c=t.applyDecoratedDescriptor,d=t.inherits,p=t.classCallCheck,f=t.possibleConstructorReturn,h=t.getPrototypeOf,v=t.initializerDefineProperty,y=t.assertThisInitialized,M=t.createClass,m=t.slicedToArray},function(t){C=t.default}],execute:function(){var b,g,_,k,B;e._RF.push({},"953beomEhxBu7N5dMSOoq/M","MonsterCtrl",void 0);var A=n.ccclass,E=n.property;t("MonsterCtrl",(b=A("MonsterCtrl"),g=E(o),b((B=c((k=function(t){function e(){var t,n;p(this,e);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return n=f(this,(t=h(e)).call.apply(t,[this].concat(r))),v(n,"monsterArr_prefab",B,y(n)),n.idMap={101:"Evil Mushroom",102:"Monster Bee",103:"Forest Bat"},n}return d(e,t),M(e,[{key:"start",value:function(){}},{key:"onEnable",value:function(){u.on(C.LoadMonsterById,this.loadMonster,this),u.on(C.HitMonster,this.beHitted,this)}},{key:"onDisable",value:function(){this.node.removeAllChildren(),u.off(C.LoadMonsterById,this.loadMonster,this),u.off(C.HitMonster,this.beHitted,this)}},{key:"beHitted",value:function(t){var e=this.node.getChildByName(t);this.node.removeChild(e)}},{key:"loadMonster",value:function(t){var e=this,n=m(t,2),l=n[0],u=n[1];r.loadRes("3DRes/gltf-exports/"+this.idMap[l]+"/"+this.idMap[l],o,(function(t,n){var o=u.split("_"),r=o[0],l=o[1],c=i(n);c.name=r+"_"+l,c.setPosition(s(r,0,l)),c.setScale(s(.5,.5,.5)),c.setRotationFromEuler(0,-180,0);var d=c.getComponent(a);d.defaultClip=d.clips[1],d.playOnLoad=!0,e.node.addChild(c)}))}}]),e}(l)).prototype,"monsterArr_prefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_=k))||_));e._RF.pop()}}}));

System.register("chunks:///_virtual/_rollupPluginBabelHelpers.js",[],(function(e){"use strict";return{execute:function(){function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(t){return(r=e("getPrototypeOf",Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)}))(t)}function n(t,r){return(n=e("setPrototypeOf",Object.setPrototypeOf||function(e,t){return e.__proto__=t,e}))(t,r)}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e){if(Array.isArray(e))return e}function a(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}e({applyDecoratedDescriptor:function(e,t,r,n,i){var o={};Object.keys(n).forEach((function(e){o[e]=n[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0);o=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0);void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null);return o},arrayWithHoles:o,assertThisInitialized:i,classCallCheck:function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass:function(e,r,n){r&&t(e.prototype,r);n&&t(e,n);return e},getPrototypeOf:r,inherits:function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)},initializerDefineProperty:function(e,t,r,n){if(!r)return;Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})},iterableToArrayLimit:a,nonIterableRest:l,possibleConstructorReturn:function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;return i(e)},setPrototypeOf:n,slicedToArray:function(e,t){return o(e)||a(e,t)||l()}})}}}));

(function () {
    var aliasChunk = function(chunkId, moduleId) {
        System.register(moduleId, [chunkId], function (_export, _context) {
            var _m;
            return {
                setters: [function(m) {
                    _m = m;
                }],
                execute: function () {
                    _export(_m);
                }
            };
        });
    };
	aliasChunk('chunks:///Utils/EventManager.js', 'project:///assets/Scripts/Utils/EventManager.js');
	aliasChunk('chunks:///Utils/FirstPersonCamera.js', 'project:///assets/Scripts/Utils/FirstPersonCamera.js');
	aliasChunk('chunks:///config/Global.js', 'project:///assets/Scripts/config/Global.js');
	aliasChunk('chunks:///Utils/EventTypes.js', 'project:///assets/Scripts/Utils/EventTypes.js');
	aliasChunk('chunks:///Game/ObstacleCtrl.js', 'project:///assets/Scripts/Game/ObstacleCtrl.js');
	aliasChunk('chunks:///Modals/WinCtrl.js', 'project:///assets/Scripts/Modals/WinCtrl.js');
	aliasChunk('chunks:///Utils/SceneManager.js', 'project:///assets/Scripts/Utils/SceneManager.js');
	aliasChunk('chunks:///Home/HomeCtrl.js', 'project:///assets/Scripts/Home/HomeCtrl.js');
	aliasChunk('chunks:///Game/FloorCtrl.js', 'project:///assets/Scripts/Game/FloorCtrl.js');
	aliasChunk('chunks:///Game/GameCtrl.js', 'project:///assets/Scripts/Game/GameCtrl.js');
	aliasChunk('chunks:///Modals/LoseCtrl.js', 'project:///assets/Scripts/Modals/LoseCtrl.js');
	aliasChunk('chunks:///Game/PlayCtrl.js', 'project:///assets/Scripts/Game/PlayCtrl.js');
	aliasChunk('chunks:///Game/MonsterCtrl.js', 'project:///assets/Scripts/Game/MonsterCtrl.js');
})();
